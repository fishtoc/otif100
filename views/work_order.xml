<odoo>
  <record model="ir.ui.view" id="work_order_form_view">
    <field name="name">work_order.form</field>
    <field name="model">otif100.work_order</field>
    <field name="arch" type="xml">
      <form string="Work Order form">
        <sheet>
          <group>
            <group string="Order Data">
              <field name="wo_id" readonly="1"/>
              <field name="sku_id"/>
              <field name="sku_description"/>
              <field name="order_type"/>
              <field name="cli_id" groups="otif100.group_manager"/>
              <field name="due_date" attrs="{'invisible': [('order_type','=','MTA')]}"/>
              <field name="qty_total"/>
            </group>
            <group string="Status">
              <field name="action_to_take"/>
              <field name="buffer_status"/>
              <field name="buffer_penetration" widget="progressbar"/>
              <field name="work_center"/>
              <field name="buffer" attrs="{'invisible': [('order_type','=','MTA')]}"/>
              <field name="stock_buffer" readonly="1" attrs="{'invisible': [('order_type','=','MTO')]}"/>
              <field name="onhand" readonly="1" attrs="{'invisible': [('order_type','=','MTO')]}"/>
            </group>
            <group string="Order details">
              <field name="qty_before_1"/>
              <field name="qty_before_2"/>
              <field name="qty_before_3"/>
              <field name="recommended_release_date" attrs="{'invisible': [('order_type','=','MTA')]}"/>
              <field name="actual_release_date" attrs="{'invisible': [('order_type','=','MTA')]}"/>
            </group>
          </group>
        </sheet>
      </form>
    </field>
  </record>

  <record model="ir.ui.view" id="work_order_tree_view">
    <field name="name">work_order.tree</field>
    <field name="model">otif100.work_order</field>
    <field name="arch" type="xml">
      <tree string="Work Order tree" default_order='buffer_status'
            decoration-bf="buffer_status == '0. black'"
            decoration-danger="buffer_status == '1. red'"
            decoration-warning="buffer_status == '2. yellow'"
            decoration-success="buffer_status == '3. green'"
            decoration-info="buffer_status == '4. cyan'">
        <field name="need_action"/>
        <field name="order_type" invisible="1"/>
        <field name="wo_id"/>
        <field name="cli_id" groups="otif100.group_manager"/>
        <field name="sku_id"/>
        <field name="sku_description"/>
        <field name="work_center"/>
        <field name="qty_total"/>
        <field name="due_date" attrs="{'invisible': [('order_type','=','MTA')]}"/>
        <field name="recommended_release_date" attrs="{'invisible': [('order_type','=','MTA')]}"/>
        <field name="actual_release_date" attrs="{'invisible': [('order_type','=','MTA')]}"/>
        <field name="buffer_status" invisible="1"/>
        <field name="company_id" invisible="1"/>
      </tree>
    </field>
  </record>

  <record model="ir.ui.view" id="work_order_search_view">
    <field name="name">work_order.search</field>
    <field name="model">otif100.work_order</field>
    <field name="arch" type="xml">
      <search>
        <field name="wo_id"/>
        <field name="sku_id"/>
        <field name="due_date"/>
        <filter name="action_required" string="On Alert" domain="[('need_action', '=', 'True')]"/>
        <filter name="is_released" string="Released" domain="[('is_released', '=', 'True')]"/>
        <filter name="loading_1" string="Loading CCR1" domain="[('qty_before_1', '>', '0')]"/>
        <filter name="loading_2" string="Loading CCR2" domain="[('qty_before_2', '>', '0')]"/>
        <filter name="loading_3" string="Loading CCR3" domain="[('qty_before_3', '>', '0')]"/>
        <filter name="is_mto" string="MTO orders" domain="[('order_type', '=', 'MTO')]"/>
        <filter name="is_mta" string="MTA orders" domain="[('order_type', '=', 'MTA')]"/>
        <group string="Group by">
          <filter name="by_customer" string="Customer" context="{'group_by': 'cli_id'}"/>
          <filter name="by_workcenter" string="Work center" context="{'group_by': 'work_center'}"/>
          <filter name="by_color" string="Priority" context="{'group_by': 'buffer_status'}"/>
          <filter name="by_type" string="Type" context="{'group_by': 'order_type'}"/>
        </group>
      </search>
    </field>
  </record>

  <record model="ir.ui.view" id="work_order_graph_view">
    <field name="name">work_order.graph</field>
    <field name="model">otif100.work_order</field>
    <field name="type">graph</field>
    <field name="arch" type="xml">
     <graph string="Color profile" orientation="horizontal" type="pie">
       <field name="buffer_status"/>
      </graph>
    </field>
  </record>

  <record model="ir.actions.server" id="ir_massive_release_action">
    <field name="name">Release marked</field>
    <field name="model_id" ref="model_otif100_work_order"/>
    <field name="binding_model_id" ref="model_otif100_work_order"/>
    <field name="key2">client_action_multi</field>
    <field name="key">action</field>
    <field name="state">code</field>
    <field name="code">model.mass_release()</field>
  </record>

  <record model="ir.actions.server" id="ir_massive_freeze_action">
    <field name="name">Freeze marked</field>
    <field name="model_id" ref="model_otif100_work_order"/>
    <field name="binding_model_id" ref="model_otif100_work_order"/>
    <field name="key2">client_action_multi</field>
    <field name="key">action</field>
    <field name="state">code</field>
    <field name="code">model.mass_freeze()</field>
  </record>


  <record model="ir.actions.act_window" id="work_order_list_action">
    <field name="name">Work Orders</field>
    <field name="res_model">otif100.work_order</field>
    <field name="limit">1000</field>
    <field name="view_type">form</field>
    <field name="view_mode">tree,graph,form</field>
  </record>

  <menuitem id="work_order_menu" name="Work Orders" parent="production_menu" action="work_order_list_action"/>
</odoo>
